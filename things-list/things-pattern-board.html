<!--
@license
Copyright Â© HatioLab Inc. All rights reserved.
-->

<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="./things-board-item.html">

<dom-module id="things-pattern-board">
  <template>
    <style>
      :host {
        display: block;
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        grid-auto-columns: 1fr;
        grid-auto-rows: 1fr;
        /* grid-template-rows: auto auto auto auto; */
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .item {
        grid-column: 1;
        grid-row: 1;
      }

      /* things-board-item {
        width: 20%
      } */
    </style>

    <div class="grid">
      <dom-repeat items="[[rows]]" as="row">
        <template>
          <things-board-item value-obj="[[row]]"></things-board-item>
        </template>
      </dom-repeat>
    </div>

  </template>

  <script>
    class ThingsPatternBoard extends Polymer.Element {
      static get is() { return 'things-pattern-board'; }

      static get properties() {
        return {
          rowUnit: {
            type: Number,
            value: 5
          },
          totalCount: {
            type: Number,
            value: 20
          },
          rows: {
            type: Array,
            computed: '_computeRows(data)'
          },
          data: Array
        };
      }

      _computeRows(data) {
        if (!data) {
          return;
        }

        var totalCount = this.totalCount;
        if (data.length > totalCount) {
          data = data.slice(0, totalCount);
        }

        while (data.length < totalCount) {
          data.push({});
        }

        // console.log(data);
        var rows = [];
        let row = [];
        var rowUnit = this.rowUnit;
        data.forEach((item, idx) => {
          rows.push(item);

          // if ((idx + 1) % rowUnit === 0 && row.length > 0) {
          //   rows.push(JSON.parse(JSON.stringify(row)));
          //   row = [];
          // } else if (idx + 1 === data.length) {
          //   rows.push(JSON.parse(JSON.stringify(row)));
          //   row = [];
          // }
        });

        return rows;
      }

      // _computeTest(row) {
      //   console.log(row);
      // }
    }

    customElements.define(ThingsPatternBoard.is, ThingsPatternBoard);
  </script>
</dom-module>