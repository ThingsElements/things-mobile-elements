<!--
@license
Copyright (c) 2017, HatioLab Inc. All right reserved.
-->
<link rel="import" href="../../polymer/polymer.html">

<link rel="import" href="../../things-meta/things-grid-meta-behavior.html">

<script>

window.Things = window.Things || {};

/**
 * ## DiyGrid 기반의 그리드 화면 구성을 위해 그리드 관련 메타 데이터를 제공하는 Behavior
 * DiyGrid 기반의 그리드 구성에 필요한 모델 정보를 제공한다.<br/>
 * 서버로 부터 받아온 DiyGrid 메타 정보를 그리드 구성을 위한 구체적인 정보로 변환하여 그리드 구성시 필요한 그리 메타 데이터를 제공한다.
 *
 * @polymerBehavior Things.DiyGridMetaBehavior
 */
Things.MobileListMetaBehaviorImpl = {

	properties: {
		metaData: {
			type: Array,
			observer: 'parseMetaData'
		},

		infoFields: {
			type: Array
		},

		detailFields: {
        	type: Array
        }
	},

	/**
	 * meta data를 파싱한다.
	 *
	 * @param {Array} metaData
	 */
	parseMetaData: function(metaData) {
		if(!metaData) return;

		if (!metaData.columns) {
			metaData = JSONfn.parse(metaData.text);
		}

		detailFields = this.metaData.columns;

		this.infoFields = [];
		var me = this;
		metaData.columns.forEach(function(column) {
			if (me.infoFields.length < 3 && column.name != 'id' 
				&& column.name != 'name' && column.name != 'domain_id'
				&& column.name != 'menu_detail_id' && column.name != 'menu_detail' ) {
				me.infoFields.push(column.name);
			}
		});
	}
};

Things.MobileListMetaBehavior = [
	Things.MobileListMetaBehaviorImpl
];

</script>
